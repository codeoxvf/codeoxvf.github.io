{"version":3,"sources":["Input.ts","setup/AddPlayer.js","Roles.ts","DeepCopy.ts","setup/ChooseRoles.js","setup/Setup.tsx","game/NameHeader.tsx","game/PlayerAction.tsx","game/DoneButton.tsx","game/RoleDescription.tsx","game/ConfirmReady.tsx","game/NightSummary.tsx","game/Game.tsx","App.tsx","index.js"],"names":["Input","AddPlayer","props","_this","Object","classCallCheck","this","_super","call","state","adding","players","validName","handleClick","bind","assertThisInitialized","validateName","handleSubmit","setState","event","value","target","length","includes","concat","toConsumableArray","elements","playerName","preventDefault","_this2","i","push","react_default","a","createElement","className","key","onClick","onSubmit","id","type","placeholder","onChange","disabled","React","Component","Roles","Villager","name","description","affiliation","input","action","Mafioso","prompt","Player","newPlayers","forEach","player","role","alive","DeepCopy","Sheriff","displayTrue","displayFalse","Investigator","Vigilante","Veteran","Doctor","Escort","Spy","Lookout","Framer","Janitor","Godfather","Consort","Consigliere","Disguiser","Jester","SerialKiller","Executioner","Witch","Medium","Mayor","Amnesiac","Werewolf","Psychic","Armourer","Locksmith","Trapper","Blackmailer","Tracker","Transporter","Pacifist","Bodyguard","Pirate","Detective","GuardianAngel","Fogger","ChooseRoles","roleNames","selected","onSelect","countSelection","startGame","newSelected","assign","values","count","roleList","keys","filter","e","_this3","map","checked","htmlFor","join","Setup","stage","submitPlayers","submitRoles","roles","onStart","setup_AddPlayer","setup_ChooseRoles","NameHeader","PlayerAction","actionResult","playerInput","inputIndex","radioChecked","submitInput","onDone","currPlayer","playerIndex","currPlayerInput","rawValue","choice","Boolean","Array","isArray","actionDisplay","select","undefined","display","replace","DoneButton","RoleDescription","Game","onReady","NightSummary","livePlayers","newDeaths","night","onDescriptionDone","onActionDone","onSummaryDone","lastPlayer","newState","ConfirmReady_Game","game_PlayerAction","App","setup_Setup","game_Game","ReactDOM","render","StrictMode","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.d10bd55c.chunk.js","sourcesContent":["enum Input {\n  Player,\n  Boolean,\n}\n\nexport default Input;\n","import React from 'react';\n\nclass AddPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      adding: false,\n      players: [],\n      validName: false,\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.validateName = this.validateName.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleClick() {\n    this.setState({\n      adding: true,\n      validName: false,\n    });\n  }\n\n  validateName(event) {\n    const value = event.target.value;\n\n    if (value.length > 0 && !this.state.players.includes(value)) {\n      this.setState({validName: true});\n      return;\n    }\n\n    this.setState({validName: false});\n  }\n\n  handleSubmit(event) {\n    this.setState({\n      adding: false,\n      players: [...this.state.players,\n        event.target.elements.playerName.value],\n    });\n\n    event.preventDefault();\n  }\n\n  render() {\n    let players = [];\n    for (let i = 0; i < this.state.players.length; i++) {\n      players.push(\n        <div className='list-group-item' key={'player' + i}>\n          {this.state.players[i]}\n        </div>\n      );\n    }\n\n    return (\n      <div className='container text-center'>\n        <button className='btn btn-primary btn-lg my-1'\n          onClick={this.handleClick}>\n          Add Player\n        </button>\n\n        <div className='my-1'>\n          {this.state.players.length} players:\n\n          <div className='list-group list-group-horizontal justify-content-center'>\n            {players}\n          </div>\n        </div>\n\n        {this.state.adding ?\n          <form onSubmit={this.handleSubmit}>\n            <input id='playerName' className='form-control' type='text'\n              placeholder='Player name'\n              onChange={this.validateName} />\n\n            <button className='btn btn-primary my-1' type='submit'\n              disabled={!this.state.validName}>\n              Add\n            </button>\n          </form> : null}\n\n        <button className='btn btn-primary btn-lg my-1'\n          onClick={() => this.props.onSubmit(this.state.players)}\n          disabled={!this.state.players.length}>\n          Choose Roles\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default AddPlayer;\n","import Player from './Player';\nimport Input from './Input';\n\nimport DeepCopy from './DeepCopy';\n\ninterface Role {\n  name: string;\n  description: string;\n  affiliation: string;\n  role?: string;\n\n  prompt?: string[];\n  input: Input[];\n  action: (players: Player[], input: (number | boolean)[]) => any;\n  //Player[] | void;\n}\n\ninterface Investigative extends Role {\n  action: (players: Player[], input: (number | boolean)[]) => boolean;\n  displayTrue: string;\n  displayFalse: string;\n}\n\nconst Roles: any = {\n  Villager: {\n    name: 'Villager',\n    description: 'You are a regular Villager. You don’t have any special actions.',\n    affiliation: 'Town',\n\n    input: [],\n    action: (players: Player[], input: (number | boolean)[]) => {},\n  } as Role,\n\n  Mafioso: {\n    name: 'Mafioso',\n    description: 'Each night you may vote alongside the rest of the mafia on who to kill.',\n    affiliation: 'Mafia',\n\n    prompt: ['Choose a player to kill.'],\n    input: [Input.Player],\n    action: (players: Player[], input: number[]) => {\n      const newPlayers: Player[] = DeepCopy(players);\n\n      newPlayers[input[0]].alive = false;\n      return newPlayers;\n    },\n  } as Role,\n\n  Sheriff: {\n    name: 'Sheriff',\n    description: 'Once per night you may check a player to determine whether they are suspicious.',\n    affiliation: 'Town',\n\n    prompt: ['Choose a player to investigate.'],\n    input: [Input.Player],\n    action: (players: Player[], input: number[]) => {\n      return Roles[players[input[0]].role].affiliation === 'Mafia';\n    },\n\n    displayTrue: '%playerName is Suspicious.',\n    displayFalse: '%playerName is Not Suspicious.',\n  } as Investigative,\n\n  Investigator: {\n    name: 'Investigator',\n    description: 'Twice per game you may choose to find out the exact role of another player.',\n    affiliation: 'Town',\n  } as Role,\n\n  Vigilante: {\n    name: 'Vigilante',\n    description: 'You have two bullets. Once per night you may choose to shoot a bullet at someone. If you shoot an innocent person you will die from guilt the following night',\n    affiliation: 'Town',\n  } as Role,\n\n  Veteran: {\n    name: 'Veteran',\n    description: 'You may go on Alert twice per game. While on Alert you gain night immunity and will kill anyone visiting you.',\n    affiliation: 'Town',\n  } as Role,\n\n  Doctor: {\n    name: 'Doctor',\n    description: 'Each night pick someone to visit. If they are harmed in any way you will prevent them from dying.',\n    affiliation: 'Town',\n  } as Role,\n\n  Escort: {\n    name: 'Escort',\n    description: 'Each night, you may prevent any other person from performing their night action.',\n    affiliation: 'Town',\n  } as Role,\n\n  Spy: {\n    name: 'Spy',\n    description: 'You can see who the Mafia visit each night.',\n    affiliation: 'Town',\n  } as Role,\n\n  Lookout: {\n    name: 'Lookout',\n    description: 'Each night you may camp outside someone’s house to determine who visited them throughout the night.',\n    affiliation: 'Town',\n  } as Role,\n\n  Framer: {\n    name: 'Framer',\n    description: 'Each night you may pick someone to frame, if the target picked is investigated, they will show up to be suspicious. If you instead pick a fellow Mafia, they will show up as not suspicious when investigated.',\n    affiliation: 'Mafia',\n  } as Role,\n\n  Janitor: {\n    name: 'Janitor',\n    description: 'Twice per game, while the Mafia is deciding who to kill, you may choose to clean the body afterwards, which prevents the target’s role from being shared publicly and allows you to see it the next night.',\n    affiliation: 'Mafia',\n  } as Role,\n\n  Godfather: {\n    name: 'Godfather',\n    description: 'Each night you may vote alongside the rest of the mafia on who to kill. If there is a tie vote your vote is the deciding vote. (You cannot be killed at night) (You will appear to be “Not Suspicious” to the Sheriff).',\n    affiliation: 'Mafia',\n  } as Role,\n\n  Consort: {\n    name: 'Consort',\n    description: 'Each night, you may prevent any other person from performing their night action.',\n    affiliation: 'Mafia',\n  } as Role,\n\n  Consigliere: {\n    name: 'Consigliere',\n    description: 'Each night you may choose to find out the exact role of another player.',\n    affiliation: 'Mafia',\n  } as Role,\n\n  Disguiser: {\n    name: 'Disguiser',\n    description: 'Each night you may choose to disguise as another player’s role, if you are killed you will appear to be that role..',\n    affiliation: 'Mafia',\n  } as Role,\n\n  Jester: {\n    name: 'Jester',\n    description: 'If you get executed during the day you win.',\n    affiliation: 'Neutral',\n  } as Role,\n\n  SerialKiller: {\n    name: 'Serial Killer',\n    description: 'Each night, pick someone to kill. (You cannot be killed at night) (If you are roleblocked by the Escort or Consort you will kill them instead).',\n    affiliation: 'Neutral',\n    role: 'Killing',\n  } as Role,\n\n  Executioner: {\n    name: 'Executioner',\n    description: 'You will be assigned a target at the start of the game. If you get them executed during the day you win. Your target will always be (Town).',\n    affiliation: 'Neutral',\n  } as Role,\n\n  Witch: {\n    name: 'Witch',\n    description: 'Each night you can force another person to use their night action on another person. You will also learn their role whilst doing so. (You win if the town loses) (You will appear to be “Not Suspicious” to the Sheriff).',\n    affiliation: 'Neutral',\n  } as Role,\n\n  Medium: {\n    name: 'Medium',\n    description: 'Each night you can select a dead person to receive one of three people who could have killed them.',\n    affiliation: 'Town',\n  } as Role,\n\n  Mayor: {\n    name: 'Mayor',\n    description: 'At any point during the game, you may flip this card over to “reveal” yourself as the mayor of the town. After you reveal yourself as the mayor, you votes are tripled during the day.',\n    affiliation: 'Town',\n  } as Role,\n\n  Amnesiac: {\n    name: 'Amnesiac',\n    description: 'Once during the game, you can attempt to remember your role by selecting a dead players role.  If you do not die during that night you will take that players role..',\n    affiliation: 'Neutral',\n  } as Role,\n\n  Werewolf: {\n    name: 'Werewolf',\n    description: 'On alternate nights, you may choose to rampage at any persons house (Including your own), killing the person and anyone who visits them. (Will kill both the doctor and the target if the doctor visits them).',\n    affiliation: 'Neutral',\n    role: 'Killing',\n  } as Role,\n\n  Psychic: {\n    name: 'Psychic',\n    description: 'On Odd Nights, you will receive the names of 3 people, one of whom is definitely evil. On Even Nights, you will receive the names of 2 people, one of whom is definitely good.',\n    affiliation: 'Town',\n    role: 'Investigative',\n  } as Role,\n\n  Armourer: {\n    name: 'Armourer',\n    description: 'You have 3 Disposable Armour Vest. Each night, you may choose to wear a Vest, give a vest to someone, or both..',\n    affiliation: 'Town',\n    role: 'Protective',\n  } as Role,\n\n  Locksmith: {\n    name: 'Locksmith',\n    description: 'At Night, place a lock on another person’s house. That person may not visit or be visited that night. You will be alerted if your target tries to leave home or someone tries to visit your target. You may not be roleblocked.',\n    affiliation: 'Town',\n    role: 'Protective',\n  } as Role,\n\n  Trapper: {\n    name: 'Trapper',\n    description: 'At Night, you may place a trap outside someone’s house. If they are visited, you will be alerted as to who visited them. It takes one night to build a trap before you can place it Your target is immune to attacks while the trap is placed.',\n    affiliation: 'Town',\n    role: 'Protective',\n  } as Role,\n\n  Blackmailer: {\n    name: 'Blackmailer',\n    description: 'At night, select a person. They will be unable to speak for the next day.',\n    affiliation: 'Mafia',\n  } as Role,\n\n  Tracker: {\n    name: 'Tracker',\n    description: 'Pick a person each night, at the end of the night you will learn whom they visited.',\n    affiliation: 'Town',\n    role: 'Investigative',\n  } as Role,\n\n  Transporter: {\n    name: 'Transporter',\n    description: 'Pick two people each night (You may pick yourself). You swap places for that night. You cannot be roleblocked.',\n    affiliation: 'Town',\n    role: 'Support',\n  } as Role,\n\n  Pacifist: {\n    name: 'Pacifist',\n    description: 'You may pick a person each night. Their vote will not count for the next day.',\n    affiliation: 'Town',\n    role: 'Support',\n  } as Role,\n\n  Bodyguard: {\n    name: 'Bodyguard',\n    description: 'You may pick a person to protect each night. If they are attacked you will kill the attacker but will die in the process. If you successfully protect someone you can still be healed.',\n    affiliation: 'Town',\n    role: 'Protective',\n  } as Role,\n\n  Pirate: {\n    name: 'Pirate',\n    description: 'Pick a person to duel each night for their treasure. Play scissors paper stone with them. If you win you will kill them and loot their treasure. If you loot the treasure from 2 people, you win.',\n    affiliation: 'Neutral',\n    role: 'Evil',\n  } as Role,\n\n  Detective: {\n    name: 'Detective',\n    description: 'Pick two players at night to visit at night. You will find out if they are on the same team. Teams: (Town, Neutral, Mafia).',\n    affiliation: 'Town',\n    role: 'Investigative',\n  } as Role,\n\n  GuardianAngel: {\n    name: 'Guardian Angel',\n    description: 'You win if your target survives. You may protect your target twice throughout the game. If your target dies you become a survivor with no vests.',\n    affiliation: 'Neutral',\n  } as Role,\n\n  Fogger: {\n    name: 'Fogger',\n    description: 'Each night you may choose to fog a person’s house. Any person visiting them will be unable to perform their night action on that person.',\n    affiliation: 'Mafia',\n    role: 'Support',\n  } as Role,\n};\n\n/* Prosecutor (Town)\n\nDefense Attorney (Town)\n\nGood King (Town)\nYou are the King\n\nEvil King (uh…not town?)\n\nSuspicious\n\nNot Suspicious\n\nYou were roleblocked!\n\nYour target is Immume\nYou have received a Vest from the Armourer\n\nYou have been blackmailed! You will be unable to talk for the next day\n\nYou can’t see your target with all this fog in their house! */\n\nexport default Roles;\n","import Player from './Player';\n\nexport default function DeepCopy(players: Player[]): Player[] {\n  let newPlayers: Player[] = [];\n\n  players.forEach((player, i) => {\n    newPlayers.push({\n      name: player.name,\n      role: player.role,\n      alive: player.alive,\n    } as Player);\n  });\n\n  return newPlayers;\n}\n","import React from 'react';\n\nimport Roles from '../Roles';\n\nclass ChooseRoles extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.roleNames = [];\n    let selected = {};\n\n    for (const i in Roles) {\n      this.roleNames.push(Roles[i].name);\n      selected[Roles[i].name] = false;\n    }\n\n    this.state = {\n      selected: selected,\n    };\n\n    this.onSelect = this.onSelect.bind(this);\n    this.countSelection = this.countSelection.bind(this);\n    this.startGame = this.startGame.bind(this);\n  }\n\n  onSelect(event) {\n    const role = event.target.id;\n    const newSelected = Object.assign({}, this.state.selected);\n\n    newSelected[role] = !newSelected[role];\n\n    this.setState({selected: newSelected});\n  }\n\n  countSelection() {\n    const values = Object.values(this.state.selected);\n    let count = 0;\n\n    for (let i = 0; i < values.length; i++) {\n      count += values[i];\n    }\n\n    return count;\n  }\n\n  startGame() {\n    const roleList = Object.keys(this.state.selected)\n      .filter((e) => this.state.selected[e])\n\n    this.props.onSubmit(roleList);\n  }\n\n  render() {\n    const roleList = this.roleNames.map((name, i) => (\n      <div className='d-grid col-4' key={'btn' + i}>\n        <input className='btn-check' type='checkbox' id={name}\n          onClick={this.onSelect} onChange={this.onSelect}\n          key={'input' + i}\n          checked={this.state.selected[name]} \n          disabled={this.state.selected[name] ? false\n          : (this.countSelection() >= this.props.players.length)} />\n\n        <label className='btn btn-outline-primary btn-lg'\n          htmlFor={name}\n          key={'label' + i}>\n          {name}\n        </label>\n      </div>\n    ));\n\n    return (\n      <div className='container'>\n        <div className='my-1'>\n          {this.props.players.length} players: {this.props.players.join(', ')}\n        </div>\n\n        <form onSubmit={this.startGame}>\n          <div className='btn-group row my-2'>\n            {roleList}\n          </div>\n\n          <button className='btn btn-primary btn-lg my-1' type='submit'\n            disabled={this.countSelection() !== this.props.players.length}>\n            Start Game\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default ChooseRoles;\n","import React from 'react';\n\nimport AddPlayer from './AddPlayer';\nimport ChooseRoles from './ChooseRoles';\n\nimport Player from '../Player';\n\ntype Props = {\n  onStart: (players: Player[]) => void;\n};\n\ntype State = {\n  stage: number;\n  players: string[];\n};\n\nclass Setup extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      stage: 0,\n      players: [],\n    };\n\n    this.submitPlayers = this.submitPlayers.bind(this);\n    this.submitRoles = this.submitRoles.bind(this);\n  }\n\n  submitPlayers(players: string[]): void {\n    this.setState({\n      players: players,\n      stage: 1,\n    });\n  }\n\n  submitRoles(roles: string[]): void {\n    // TODO: shuffle roles/assign to each player\n    let players: Player[] = [];\n\n    for (let i = 0; i < roles.length; i++) {\n      players.push({\n        name: this.state.players[i],\n        role: roles[i],\n        alive: true,\n      } as Player);\n    }\n\n    this.props.onStart(players);\n  }\n\n  render() {\n    switch (this.state.stage) {\n      case 0:\n      return (\n        <AddPlayer onSubmit={this.submitPlayers} />\n        );\n\n      case 1:\n      return (\n        <ChooseRoles onSubmit={this.submitRoles}\n          players={this.state.players} />\n        );\n\n      default: break;\n    }\n  }\n}\n\nexport default Setup;\n","import React from 'react';\n\nimport Player from '../Player';\n\ntype Props = {\n  player: Player;\n};\n\nexport default function NameHeader(props: Props) {\n  return (\n    <div className='my-1'>\n      {props.player.name}:\n    </div>\n  );\n}\n","import React from 'react';\n\nimport NameHeader from './NameHeader';\n\nimport Roles from '../Roles';\nimport Player from '../Player';\nimport Input from '../Input';\n\ntype Props = {\n  players: Player[];\n  newPlayers: Player[];\n\n  playerIndex: number;\n\n  onDone: (newPlayers?: Player[]) => void;\n};\n\ntype State = {\n  newPlayers: Player[];\n\n  actionResult: boolean | string;\n\n  playerInput: (number | boolean)[];\n\n  inputIndex: number;\n  radioChecked: boolean;\n};\n\nclass PlayerAction extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      //newPlayers: this.props.newPlayers,\n      newPlayers: [],\n\n      actionResult: '',\n\n      playerInput: [],\n\n      inputIndex: 0,\n      radioChecked: false,\n    };\n\n    this.submitInput = this.submitInput.bind(this);\n    this.onDone = this.onDone.bind(this);\n  }\n\n  submitInput(event: React.FormEvent): void {\n    event.preventDefault();\n\n    const currPlayer: Player = this.props.players[this.props.playerIndex];\n    const currPlayerInput: Input[] = Roles[currPlayer.role].input;\n\n    const rawValue = (event.target as HTMLFormElement).choice.value;\n    let value: number | boolean = 0;\n\n    if (currPlayerInput[this.state.inputIndex] === Input.Boolean) {\n      value = rawValue === 'yes';\n    } else {\n      for (let i = 0; i < this.props.players.length; i++) {\n        if (this.props.players[i].name === rawValue) {\n          value = i;\n        }\n      }\n    }\n\n    if (this.state.inputIndex === currPlayerInput.length - 1) {\n      const action = Roles[currPlayer.role].action(this.props.newPlayers,\n        [...this.state.playerInput, value]);\n\n      if (typeof action === 'boolean') {\n        this.setState({\n          inputIndex: this.state.inputIndex + 1,\n          actionResult: action,\n        });\n\n        return;\n      } else if (Array.isArray(action)) {\n        this.setState({\n          inputIndex: this.state.inputIndex + 1,\n          newPlayers: action,\n        });\n\n        return;\n      }\n\n      this.setState({\n        inputIndex: this.state.inputIndex + 1,\n        //inputIndex: 0,\n        playerInput: [],\n        radioChecked: false,\n      });\n\n      return;\n    }\n\n    this.setState({\n      inputIndex: this.state.inputIndex + 1,\n      playerInput: [...this.state.playerInput, value],\n      radioChecked: false,\n    });\n  }\n\n  onDone(): void {\n    //const currPlayer: Player = this.props.players[this.props.playerIndex];\n\n    if (this.state.newPlayers.length) {\n      this.props.onDone(this.state.newPlayers);\n      return;\n    }\n\n    this.props.onDone();\n  }\n\n  render() {\n    const currPlayer: Player = this.props.players[this.props.playerIndex];\n\n    let actionDisplay;\n\n    if (!Roles[currPlayer.role].input.length) {\n      actionDisplay = <div>You have no actions to perform.</div>;\n    } else {\n      switch (Roles[currPlayer.role].input[this.state.inputIndex]) {\n        case Input.Player:\n        let select: React.ReactElement[] = [];\n          const livePlayers = this.props.players\n            .filter(player => player.alive\n              && (player.name !== currPlayer.name));\n\n          livePlayers.forEach((player, i) => {\n            const name = player.name;\n\n            select.push(\n              <option value={name} key={'option' + i}>{name}</option>\n            );\n          });\n\n          actionDisplay = (\n            <form onSubmit={this.submitInput}>\n              <select className='form-select my-1' name='choice'>\n                {select}\n              </select>\n\n              <input className='btn btn-primary my-1' type='submit'\n                value='Done' />\n            </form>\n          );\n\n          break;\n\n        case Input.Boolean:\n        actionDisplay = (\n          <form onSubmit={this.submitInput}>\n            <div className='btn-group m-1'>\n              <input className='btn-check' type='radio' value='yes'\n                onChange={() => {this.setState({radioChecked: true})}}\n                name='choice' id='yes' />\n\n              <label className='btn btn-outline-primary' htmlFor='yes'>\n                Yes\n              </label>\n\n              <input className='btn-check' type='radio' value='no'\n                onChange={() => {this.setState({radioChecked: true})}}\n                name='choice' id='no'/>\n\n              <label className='btn btn-outline-primary' htmlFor='no'>\n                No\n              </label>\n            </div>\n\n            <input className='btn btn-primary my-1' type='submit' value='Done'\n              disabled={!this.state.radioChecked} />\n          </form>\n        );\n          break;\n\n        case undefined:\n        actionDisplay = <div>You have finished your actions.</div>;\n          // Investigative\n          if ('displayTrue' in Roles[currPlayer.role]) {\n            let display: string = this.state.actionResult\n              ? Roles[currPlayer.role].displayTrue\n              : Roles[currPlayer.role].displayFalse;\n\n            display = display.replace('%playerName', currPlayer.name);\n\n            actionDisplay = (\n              <div>\n                {display}\n              </div>\n            );\n          }\n          break;\n\n        default: break;\n      }\n    }\n\n    const prompt = Roles[currPlayer.role].prompt ?\n    ( <div className='my-1'>\n        {Roles[currPlayer.role].prompt[this.state.inputIndex]}\n      </div> ) : null;\n\n    return (\n      <div className='container text-center'>\n        <NameHeader player={currPlayer} />\n\n        {prompt}\n        {actionDisplay}\n\n        <button className='btn btn-primary btn-lg my-1'\n          onClick={this.onDone}\n          disabled={!(this.state.inputIndex\n        >= Roles[currPlayer.role].input.length)}>\n          Done\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default PlayerAction;\n","import React from 'react';\n\ntype Props = {\n  onDone: () => void;\n};\n\nexport default function DoneButton(props: Props) {\n  return (\n    <button className='btn btn-primary btn-lg my-1'\n      onClick={() => {props.onDone()}}>\n      Done\n    </button>\n  );\n}\n","import React from 'react';\n\nimport NameHeader from './NameHeader';\nimport DoneButton from './DoneButton';\n\nimport Player from '../Player';\nimport Roles from '../Roles';\n\ntype Props = {\n  player: Player;\n  onDone: () => void;\n};\n\nexport default function RoleDescription(props: Props) {\n  return (\n    <div className='container text-center'>\n      <NameHeader player={props.player} />\n\n      <div>\n        You are the {props.player.role}.\n      </div>\n      <div>\n        {Roles[props.player.role].description}\n      </div>\n\n      <DoneButton onDone={props.onDone} />\n    </div>\n  );\n}\n","import React from 'react';\n\nimport NameHeader from './NameHeader';\n\nimport Player from '../Player';\n\ntype Props = {\n  player: Player;\n  onReady: () => void;\n};\n\nexport default function Game(props: Props) {\n  return (\n    <div className='text-center'>\n      <NameHeader player={props.player} />\n\n      <button className='btn btn-primary btn-lg my-1'\n        onClick={props.onReady}>\n        Ready\n      </button>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport DoneButton from './DoneButton';\n\nimport Player from '../Player';\nimport Roles from '../Roles';\n\ntype Props = {\n  players: Player[];\n  newPlayers: Player[];\n\n  night: number;\n\n  onDone: () => void;\n};\n\nexport default function NightSummary(props: Props) {\n  const livePlayers = props.newPlayers.filter(player => player.alive);\n  const sameAffil = livePlayers.filter(player => (\n    Roles[player.role].affiliation === Roles[livePlayers[0].role].affiliation\n  ));\n\n  if (sameAffil.length === livePlayers.length) {\n    return (\n      <div className='alert alert-secondary text-center my-1'>\n        The {Roles[livePlayers[0].role].affiliation} wins.\n      </div>\n    );\n  }\n\n  let newDeaths: string[] = [];\n\n  props.newPlayers.forEach((player, i) => {\n    if (props.players[i].alive !== player.alive) {\n      newDeaths.push(player.name);\n    }\n  });\n\n  return (\n    <div className='container text-center'>\n      <div>\n        End of night {props.night}:\n      </div>\n\n      <div className='alert alert-secondary my-1'>\n        {newDeaths.length ? newDeaths.join(', ')\n          : 'No one'} died last night. Discuss.\n        </div>\n\n        <DoneButton onDone={props.onDone} />\n      </div>\n  );\n}\n","import React from 'react';\n\nimport PlayerAction from './PlayerAction';\nimport RoleDescription from './RoleDescription';\nimport ConfirmReady from './ConfirmReady';\nimport NightSummary from './NightSummary';\n\nimport Player from '../Player';\n\ntype Props = {\n  players: Player[];\n};\n\ntype State = {\n  players: Player[];\n  newPlayers: Player[];\n\n  night: number;\n  stage: number;\n  playerIndex: number;\n};\n\nclass Game extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      players: this.props.players,\n      newPlayers: this.props.players,\n\n      night: 0,\n      stage: 0,\n      playerIndex: 0,\n    };\n\n    this.onReady = this.onReady.bind(this);\n    this.onDescriptionDone = this.onDescriptionDone.bind(this);\n    this.onActionDone = this.onActionDone.bind(this);\n    this.onSummaryDone = this.onSummaryDone.bind(this);\n  }\n\n  onReady(): void {\n    this.setState({stage: this.state.night ? 1 : -1});\n  }\n\n  onDescriptionDone(): void {\n    const lastPlayer = (this.state.playerIndex\n      === this.state.players.length - 1);\n\n    this.setState({\n      playerIndex: lastPlayer ? 0 : this.state.playerIndex + 1,\n\n      night: lastPlayer ? this.state.night + 1 : this.state.night,\n      stage: 0,\n    });\n  }\n\n  onActionDone(newPlayers?: Player[]): void {\n    const lastPlayer = (this.state.playerIndex\n      === this.state.players.length - 1);\n\n    let newState = {} as State;\n\n    if (lastPlayer) {\n      newState = {\n        stage: 2,\n        playerIndex: 0,\n      } as State;\n    } else {\n      newState = {\n        stage: 0,\n        playerIndex: this.state.playerIndex + 1,\n      } as State;\n    }\n\n    if (newPlayers !== undefined) {\n      newState.newPlayers = newPlayers;\n    }\n\n    this.setState(newState);\n  }\n\n  onSummaryDone() {\n    this.setState({\n      players: this.state.newPlayers,\n\n      night: this.state.night + 1,\n      stage: 0,\n    });\n  }\n\n  render() {\n    // TODO: shuffle order and implement role priorities\n    const currPlayer: Player = this.state.players[this.state.playerIndex];\n\n    switch (this.state.stage) {\n      case 0:\n      if (!currPlayer.alive) {\n        this.onActionDone(this.state.players);\n      }\n\n      return (\n        <ConfirmReady player={currPlayer}\n          onReady={this.onReady} />\n        );\n\n      case -1:\n      return (\n        <RoleDescription player={currPlayer}\n          onDone={this.onDescriptionDone} />\n        );\n\n      case 1:\n      return (\n        <PlayerAction players={this.state.players}\n          newPlayers={this.state.newPlayers}\n          playerIndex={this.state.playerIndex}\n          onDone={this.onActionDone} />\n        );\n\n      case 2:\n      return (\n        <NightSummary players={this.state.players}\n          night={this.state.night}\n          newPlayers={this.state.newPlayers}\n          onDone={this.onSummaryDone}/>\n      );\n\n      default: break;\n    }\n  }\n}\n\nexport default Game;\n","import React from 'react';\n\nimport Setup from './setup/Setup';\nimport Game from './game/Game';\n\nimport Player from './Player';\n\ntype Props = {};\n\ntype State = {\n  stage: number;\n  players: Player[];\n};\n\nclass App extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      stage: 0,\n      players: [],\n    };\n\n    this.startGame = this.startGame.bind(this);\n  }\n\n  startGame(players: Player[]): void {\n    this.setState({\n      stage: 1,\n      players: players,\n    });\n  }\n\n  render() {\n    /*return <Game players={[{\n      name: 'vil',\n      role: 'Villager',\n      alive: true,\n    } as Player, {\n      name: 'maf',\n      role: 'Mafioso',\n      alive: true,\n    } as Player, {\n      name: 'sher',\n      role: 'Sheriff',\n      alive: true,\n    }]} />;*/\n    switch (this.state.stage) {\n      case 0:\n      return (\n        <Setup onStart={this.startGame} />\n        );\n\n      case 1:\n      return (\n        <Game players={this.state.players} />\n        );\n\n      default: break;\n    }\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}